<!DOCTYPE html>
<!-- 5-DOF Rocket Simulation Tutorial ‚Ä¢ Caledonian Rocketry -->
<html lang="en" x-data="guRocketryApp" :class="{ dark: darkMode }">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Build a 5-DOF Rocket Simulation ‚Ä¢ Caledonian Rocketry</title>

    <!-- Fonts & Tailwind -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet" />
    <script src="https://cdn.tailwindcss.com?plugins=typography,aspect-ratio"></script>

    <!-- AOS scroll animations -->
    <link rel="stylesheet" href="https://unpkg.com/aos@2.3.4/dist/aos.css" />
    <script src="https://unpkg.com/aos@2.3.4/dist/aos.js"></script>

    <!-- Alpine.js -->
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <script>
      document.addEventListener('alpine:init', () => {
        Alpine.data('guRocketryApp', () => ({ darkMode: true }));
      });
    </script>

    <!-- Colour tokens + prose helpers + star-field canvas -->
    <style>
      :root{ --rocket-red:#ff3131; --earth-brown:#8b5e3c; }
      body{font-family:'Inter',sans-serif}
      .accent-red{color:var(--rocket-red);}
      .accent-brown{color:var(--earth-brown);}
      .callout{background:rgba(31,41,55,.6);border-left:4px solid var(--rocket-red);
               padding:1rem;border-radius:.5rem;font-size:.875rem;color:#e5e7eb;margin:1.5rem 0;}
      pre code{display:block;background:rgba(17,24,39,.9);padding:1rem;border-radius:.375rem;
               color:#f3f4f6;overflow-x:auto;font-size:.75rem;line-height:1.625;}
      th,td{padding:.75rem 1rem;}
      .video-placeholder{background:rgba(31,41,55,.4);color:#e5e7eb;display:flex;
                         align-items:center;justify-content:center;height:200px;border-radius:.5rem;
                         margin:1rem 0;font-size:.875rem;}
      /* ‚òÖ star-field canvas */
      #starfield{position:fixed;inset:0;z-index:-1;background:#000;touch-action:none}
    </style>
  </head>

  <body class="bg-white dark:bg-gray-950 text-gray-900 dark:text-white antialiased scroll-smooth">

    <!-- ‚òÖ star-field backdrop -->
    <canvas id="starfield"></canvas>

    <!-- ====================== NAVBAR ====================== -->
    <header class="sticky top-0 z-50 backdrop-blur-lg/60 border-b border-gray-800 dark:border-gray-700" x-data="{open:false}">
      <div class="max-w-7xl mx-auto px-4 py-3 flex items-center justify-between">
        <a href="index.html" class="text-xl font-extrabold tracking-tight accent-brown">Caledonian Rocketry</a>

        <!-- desktop links -->
        <nav class="hidden md:flex gap-8 text-sm uppercase font-semibold">
          <a href="index.html"             class="hover:text-[color:var(--rocket-red)]">Home</a>
          <a href="Events.html"            class="hover:text-[color:var(--rocket-red)]">Events</a>
          <a href="Preliminaries.html"     class="hover:text-[color:var(--rocket-red)]">Preliminaries</a>
          <a href="DeploymentTutorial.html" class="text-[color:var(--rocket-red)]">Tutorials</a>
          <a href="certification.html"     class="hover:text-[color:var(--rocket-red)]">Certifications</a>
        </nav>

        <!-- mobile burger -->
        <button @click="open=!open" class="md:hidden text-gray-100">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7" fill="none" stroke="currentColor">
            <path x-show="!open" stroke-linecap="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
            <path x-show="open"  stroke-linecap="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </button>
      </div>

      <!-- mobile drawer -->
      <div x-show="open" x-transition class="md:hidden bg-gray-900 border-t border-gray-800">
        <ul class="flex flex-col items-center py-6 gap-6 text-lg font-semibold">
          <li><a href="index.html"             @click="open=false" class="hover:text-[color:var(--rocket-red)]">Home</a></li>
          <li><a href="Events.html"            @click="open=false" class="hover:text-[color:var(--rocket-red)]">Events</a></li>
          <li><a href="Preliminaries.html"     @click="open=false" class="hover:text-[color:var(--rocket-red)]">Preliminaries</a></li>
          <li><a href="DeploymentTutorial.html"@click="open=false" class="text-[color:var(--rocket-red)]">Tutorials</a></li>
          <li><a href="certification.html"     @click="open=false" class="hover:text-[color:var(--rocket-red)]">Certifications</a></li>
        </ul>
      </div>
    </header>

    <!-- ====================== HERO ====================== -->
    <section class="pt-32 pb-20 bg-gradient-to-b from-black to-gray-900 text-center relative overflow-hidden">
      <img src="../assets/tutorials/5dof_hero.jpg" alt="5-DOF Simulink schematic" class="absolute inset-0 w-full h-full object-cover opacity-20 pointer-events-none" />
      <div class="relative z-10 max-w-4xl mx-auto px-4" data-aos="zoom-in">
        <h1 class="text-4xl md:text-5xl font-extrabold mb-3 accent-brown">How to Build a 5-DOF Rocket Simulation in&nbsp;Simulink</h1>
        <p class="text-gray-300">A practical, image-ready guide for rocketry students&nbsp;&amp;&nbsp;hobbyists</p>
      </div>
    </section>

    <!-- ====================== MAIN ====================== -->
    <main class="prose dark:prose-invert md:prose-lg max-w-4xl mx-auto px-4 py-16 prose-headings:font-semibold prose-headings:accent-brown">

      <!-- 0 ¬∑ Why 5 DOF? -->
      <h2 id="why">0 ¬∑ Why 5 DOF?</h2>
      <p>A 6-DOF model resolves all three rotations (roll œÜ, pitch Œ∏, yaw œà) and all three translations. A <strong>5-DOF</strong> model drops roll dynamics while keeping roll-coupled mass properties. The assumption is valid for:</p>
      <ul>
        <li><strong>Axis-symmetric launch vehicles</strong> whose roll is either uncontrollable or has negligible effect on guidance.</li>
        <li>Concept studies where pitch‚Äìyaw motion and translation dominate performance metrics (e.g. altitude, range, attitude for TVC).</li>
      </ul>
      <p>This simplification cuts one rotational state and the propellant slosh-induced inertia derivative, giving lighter code, faster Monte-Carlo trials, and easier controller proofs (<a href="https://ntrs.nasa.gov/api/citations/19760010978/downloads/19760010978.pdf" target="_blank">NASA SENS-5D</a>).</p>

      <!-- Why Simulink? -->
      <h2 id="why-simulink">Why Learn Simulink?</h2>
      <p>Simulink isn‚Äôt just a toy ‚Äî it‚Äôs a core tool used across the aerospace, automotive, and energy industries. From SpaceX to Siemens, Simulink powers control loops, system models, and rapid prototyping. By learning it now, you‚Äôre building a skillset that will:</p>
      <ul>
        <li>üíº <strong>Impress recruiters</strong> ‚Äî simulation and model-based design are key talking points in interviews.</li>
        <li>üéì <strong>Accelerate coursework</strong> ‚Äî especially at Caledonian where control systems, dynamics, and embedded applications often rely on MATLAB &amp; Simulink.</li>
        <li>üöÄ <strong>Empower your own projects</strong> ‚Äî from rockets to robotic arms to drones, you‚Äôll be able to model, simulate, and iterate fast.</li>
      </ul>
      <p>Some real-world systems modelled in Simulink include:</p>
      <ul>
        <li>Jet engine control loops</li>
        <li>EV drivetrain dynamics and regenerative braking</li>
        <li>Satellite attitude controllers</li>
        <li>Wind-turbine pitch/yaw optimisation</li>
      </ul>

      <div class="callout">‚ö†Ô∏è <strong>Disclaimer</strong> ‚Äî This tutorial is a starting point. It may contain minor bugs or assumptions that don‚Äôt hold for all rockets, but it‚Äôs <em>good enough to get you simulating</em>, thinking, and experimenting like a control engineer.</div>

      <!-- 1 ¬∑ Equation Set -->
      <h2 id="equations">1 ¬∑ Equation Set</h2>
      <p>This is the function at the core of the simulation: a quaternion-based, body-frame-aware rigid-body dynamic model for translation and rotation.</p>

      <pre><code>function [pdd, wd, qd] = EOM(m, Fxyz, q_in, w1, w2, w3, Mb)

q_in = q_in / norm(q_in);
Ix=0.00083; Iy=0.00073; Iz=0.00073;
g=9.81;
wx=w1; wy=w2; wz=w3;
w=[w1;w2;w3];

% Newton-Euler rotation
wxd = (1/Ix) * (Mb(1) + (Iy - Iz) * wy * wz);
wyd = (1/Iy) * (Mb(2) + (Iz - Ix) * wx * wz);
wzd = (1/Iz) * (Mb(3) + (Ix - Iy) * wx * wy);
wd =[wxd;wyd;wzd];

% Quaternion rate
qd = 0.5*hamilton(q_in,[0;wx;wy;wz]);

% Rotate net force into inertial frame
Fi_quat = hamilton(hamilton(q_in,[0;Fxyz]), conjugate(q_in));
Fi = Fi_quat(2:4);

% Translational accelerations
xdd = (Fi(1) / m) - g;
ydd =  Fi(2) / m;
zdd =  Fi(3) / m;
pdd = [xdd; ydd; zdd];

function product = hamilton(q, r)
    product = [r(1)*q(1) - r(2)*q(2) - r(3)*q(3) - r(4)*q(4);
               r(1)*q(2) + r(2)*q(1) + r(3)*q(4) - r(4)*q(3);
               r(1)*q(3) - r(2)*q(4) + r(3)*q(1) + r(4)*q(2);
               r(1)*q(4) + r(2)*q(3) - r(3)*q(2) + r(4)*q(1)];
end

function q_star = conjugate(q)
    q_star = [q(1); -q(2); -q(3); -q(4)];
end

end</code></pre>

      <div class="callout">üß† <strong>Note</strong> ‚Äî This EOM uses a quaternion-based attitude representation to avoid gimbal lock and to cleanly rotate forces between frames. Euler angle rates are derived later in the Kinematics block.</div>
      <div class="callout">üí° <strong>Tip</strong> ‚Äî Keeping œÜ as a constant parameter retains gravity-projection trig without adding a dynamic state.</div>

      <!-- 2 ¬∑ Block-Diagram Topology -->
      <h2 id="blocks">2 ¬∑ Block-Diagram Topology</h2>
      <ol>
        <li><strong>Platform Top Level</strong> (<em>Fig-1_FullBlock.png</em>)</li>
        <li><strong>Environment</strong> (<em>Fig-2_Environment.png</em>)</li>
        <li><strong>Propulsion &amp; Mass</strong> (<em>Fig-3_PropMass.png</em>)</li>
        <li><strong>Aerodynamics</strong> (<em>Fig-4_Aero.png</em>)</li>
        <li><strong>Attitude Kinematics</strong> (<em>Fig-5_Kinematics.png</em>)</li>
        <li><strong>TVC Actuator</strong> (<em>Fig-6_TVC.png</em>)</li>
      </ol>

      <!-- Quick preview images -->
      <div class="grid sm:grid-cols-2 gap-6 my-8" data-aos="zoom-in-up">
        <img src="../assets/tutorials/Fig-1_FullBlock.png" alt="Full 5-DOF block diagram" class="rounded-lg shadow-lg" />
        <img src="../assets/tutorials/Fig-2_Environment.png" alt="Environment subsystem" class="rounded-lg shadow-lg" />
      </div>

      <!-- 3 ¬∑ Step-by-Step Build -->
      <h2 id="build">3 ¬∑ Step-by-Step Build</h2>

      <h3>Fig-1 ‚Äî Full 5-DOF Block Diagram</h3>
      <p>Start by dropping a <strong>large Matlab Function Block</strong> and labelling it <strong>EOM</strong> (equations-of-motion); this will house the rigid-body ODEs later. Wire its left-hand input ports (top-to-bottom) to:</p>
      <ol>
        <li>Rocket subsystem‚Äôs <em>Mass</em> and <em>T</em> outputs.</li>
        <li>Environment subsystem‚Äôs <em>Vb</em> output (velocity-in-body).</li>
        <li>Aerodynamics subsystem‚Äôs <em>w</em> output (body-rates).</li>
        <li>A three-way <strong>Sum</strong> block that collects aerodynamic force <em>Fb</em>, servo moment <em>Mb</em> and TVC reaction moment <em>M<sub>tvc</sub></em>.</li>
      </ol>
      <p>Feed EOM‚Äôs right-hand outputs (acceleration <em>pdd</em> and angular-rate derivative <em>wd</em>) into <strong>Integration/StopCondition</strong> (translation) and an <strong>Integrator</strong> feeding the <strong>Rotation</strong> subsystem. Finally, send position <em>Xe</em>, Euler angles and quaternions to an <strong>Animation</strong> subsystem for visualisation. Lay out the wires first, then drop the grey-shaded subsystems inside the white canvas exactly as shown.</p>

      <h3>Fig-2 ‚Äî Environment Subsystem</h3>
      <p>Begin with two <strong>Wind Speed</strong> Sine-Wave blocks and low-pass them using <strong>Unit Delay</strong> blocks (<code>z‚Åª¬≥</code>) to emulate wind coherence. A <strong>Vector Concatenate</strong> merges the wind components and a <strong>Constant</strong> block (zero) into a 3 √ó 1 vector <em>Vxyz</em>. Sum this with the rigid-body velocity using a <strong>Sum</strong> block marked ‚Äú+ +‚Äù to obtain <em>Vrel</em> (relative wind). Pass <em>Vrel</em> and the incoming quaternion <em>q_in</em> into a MATLAB Function titled <em>l_to_b</em> to rotate the vector into body axes, yielding <em>Vb</em>. Probe the key signals with Scope blocks and export <em>Vb</em> through an <strong>Outport</strong>.</p>

      <h3>Fig-3 ‚Äî Propulsion &amp; Mass Subsystem</h3>
      <p><strong>Top branch (mass)</strong>: place a <strong>Constant</strong> (‚àí<em>c</em>) for propellant mass-flow rate into an <strong>Integrator (1/s)</strong>. Limit the result with a <strong>Saturation</strong> so mass never drops below zero, then sum it with a <strong>Constant 0.607 kg</strong> dry-mass using a two-input <strong>Sum</strong>. Tap the summed line to a <strong>Goto/From</strong> pair or <strong>Outport</strong> called <em>Mass</em>.</p>
      <p><strong>Bottom branch (thrust)</strong>: drive a <strong>1-D Lookup Table</strong> (labelled <em>T(u)</em>) with a <strong>Constant 0</strong> time input, producing <em>Tx</em>. Combine <em>Tx</em> with two <strong>Constant 0</strong> blocks in a <strong>Mux</strong> to form a 3-component thrust vector, then out via <strong>Outport T</strong>.</p>

      <h3>Fig-4 ‚Äî Aerodynamics Subsystem</h3>
      <p>Feed the 3-axis body velocity <em>Vb</em> into a MATLAB Function that outputs individual components (<em>Vx</em>, <em>Vy</em>, <em>Vz</em>) plus magnitude. Use two <strong>If</strong> blocks to guard against negative <em>Vx</em>/<em>Vy</em> when computing AoA and Beta; each branch contains a small <strong>Gain</strong> and a <strong>Merge</strong>. Convert AoA/Beta from radians to degrees, then bundle AoA, Beta, <em>Vb</em> and body rates <em>w</em> into the main aerodynamic-coefficients MATLAB Function (shown with the airplane icon). That function returns force <em>Fb</em>, moment <em>Mb</em>, and coefficient buses. Finally, deliver <em>Fb</em> and <em>Mb</em> to the calling level through Outports.</p>

      <h4>Lift, Side-Force &amp; Drag Function</h4>
      <p>The following MATLAB function computes aerodynamic forces (<code>Flift</code>, <code>Fside</code>, <code>Fdrag</code>) and moments (<code>Mb</code>) from the angle-of-attack, sideslip, body-axis velocity and angular-rates. It is referenced by the <strong>Aerodynamics</strong> subsystem in Fig-4.</p>

      <pre><code>function [Fb, Mb, Flift, Fside, Fdrag, Cn, Cs, CmpDamp, CmyDamp] = Lift(AoA, Beta, Vb, w)
%define parameters
Ab = 0.003504635; Afin = 0.00965; Aplanform = 0.0835;
l = 0.202; Mroll = 0; rho = 1.225; Cdx = 0.65; d = 0.068;
Vbx = Vb(1); Vby = Vb(2); Vbz = Vb(3); wy = w(2); wz = w(3);
span = 0.1; midchord = (90-85.134)*pi/180; K = 1.1;

AoAThreshold = 5*pi/180; Vmag = norm(Vb); q = 0.5*rho*Vmag^2;
M = Vmag/340; r = d/2;

%calculate Cn, Cs
if M > 1, M = 0.99; end
rho = span^2*sqrt(1-M^2)/Afin*cos(midchord);

if abs(AoA) < AoAThreshold
    CnNose = 2*sin(AoA)/Ab*pi*0.229^2;
    Cnfins = 3*(2*pi*span^2/Ab)/(1+sqrt(1+rho^2));
    CnAoA = CnNose + Cnfins; Cn = CnAoA*-sin(AoA);
else
    CnNose = 2*sin(AoA)/Ab*pi*0.229^2;
    Cnfins = 3*(2*pi*span^2/Ab)/(1+sqrt(1+rho^2));
    CnBodyLift = K*Aplanform/Ab*sin(AoA)^2;
    CnAoA = CnNose + Cnfins + CnBodyLift; Cn = CnAoA*-sin(AoA);
end

if abs(Beta) < AoAThreshold
    CsNose = 2*sin(Beta)/Ab*pi*0.229^2;
    Csfins = 3*(2*pi*span^2/Ab)/(1+sqrt(1+rho^2));
    CsBeta = CsNose + Csfins; Cs = CsBeta*sin(Beta);
else
    CsNose = 2*sin(Beta)/Ab*pi*0.229^2;
    Csfins = 3*(2*pi*span^2/Ab)/(1+sqrt(1+rho^2));
    CsBodyLift = K*Aplanform/Ab*sin(Beta)^2;
    CsBeta = CsNose + Csfins + CsBodyLift; Cs = CsBeta*sin(Beta);
end

% moment coefficients
Cmp = ((Cn*l)/d); Cmy = ((Cs*l)/d);
CmpDamp = -(1.25^4*r*-wy^2)/(Ab*d*Vmag^2);
CmyDamp =  (1.25^4*r*-wz^2)/(Ab*d*Vmag^2);
Cmp = Cmp + CmpDamp; Cmy = Cmy + CmyDamp;

% aero force vectors
if Vmag > 1e-3
    Fdragmagx = q*Ab*Cdx;
    Fdragx = Fdragmagx*(Vbx/Vmag*sign(Vbx));
    Fdragyz = Fdragmagx*([Vby*sign(Vby); Vbz*sign(Vbz)]/Vmag);
    Fdrag = [Fdragx; Fdragyz];
    Flift = q*Ab*Cn; Fside = q*Ab*Cs;
    Mpitch = q*Ab*d*Cmp; Myaw = q*Ab*d*Cmy;
else
    Fdrag = [0;0;0]; Flift = 0; Fside = 0; Mpitch = 0; Myaw = 0;
end

Fb = [0;-Fside;Flift] - Fdrag;  % inversion for coord system
Mb = [Mroll; -Mpitch; -Myaw];
end</code></pre>

      <!-- Fig-5 -->
      <h3>Fig-5 ‚Äî Attitude Kinematics Subsystem</h3>
      <p>Bring the quaternion <em>Q</em> in through an <strong>Inport</strong>. Square-and-sum it with a <strong>Math Function |u|¬≤</strong>; a <strong>Compare to Zero</strong> block flips open a bypass path if the norm is zero (avoids NaNs). The validated quaternion drives a MATLAB Function titled <em>q [R‚ÇÅ,R‚ÇÇ,R‚ÇÉ]</em> (Rotation Order XYZ) that outputs Euler angles; a small <strong>Gain ‚àí1</strong> flips sign convention before the <strong>Outport Euler angles</strong>. In parallel, feed <em>Q</em> into a MATLAB Function that converts quaternion ‚Üí axis-angle (<strong>axis angles</strong> Outport) and into a <strong>Quaternion to DCM</strong> block (<strong>DCM_be</strong> Outport).</p>

      <!-- Fig-6 -->
      <h3>Fig-6 ‚Äî Integration / Stop-Condition Subsystem</h3>
      <p><strong>Top path (attitude)</strong>: integrate angular-rate derivative <em>wd</em> with an <strong>Integrator</strong> to get body-rates <em>w</em>, then another <strong>Integrator</strong> to accumulate Euler angle <em>theta</em>; attach Scopes to both.</p>
      <p><strong>Bottom path (translation)</strong>: integrate acceleration <em>pdd</em> once for <em>Velocity</em> and again for <em>Dis</em> (displacement). Route <em>Vx</em> and <em>Xx</em> components into a nested <strong>Stop Condition</strong> subsystem: two <strong>Relational Operator</strong> blocks check ‚Äú&lt; ‚àí3 m/s‚Äù and ‚Äú‚â§ ‚àí1.5 m‚Äù, their outputs feed an <strong>AND</strong> which triggers a <strong>Stop Simulation</strong> block. Multiplex the position components through a <strong>Mux</strong> and scale by a <strong>Gain 10</strong> to produce <em>myTranslation</em> for the visualiser; a simple <strong>Gain ‚àí1</strong> flips sign for <em>Xe</em> if your inertial frame demands it.</p>

    </main>

    <!-- ====================== FOOTER ====================== -->
    <footer class="border-t border-gray-800 dark:border-gray-700 py-8 text-center text-sm text-gray-500 dark:text-gray-400">
      ¬© 2025 Craig Andrews ¬∑ Caledonian Rocketry
    </footer>

    <!-- Init AOS -->
    <script> AOS.init({ duration: 800, once: true }); </script>

    <!-- ‚òÖ‚òÖ Star-field JS -->
    <script>
      document.addEventListener('DOMContentLoaded',()=>{
        const c=document.getElementById('starfield'),ctx=c.getContext('2d'),
              DPR=window.devicePixelRatio||1,
              L=[{n:60,s:.06,z:1.6},{n:120,s:.03,z:1.1},{n:180,s:.015,z:.8}];
        let W,H,S=[],tx=0,ty=0,last=0;
        const R=()=>{W=c.width=innerWidth*DPR;H=c.height=innerHeight*DPR;ctx.scale(DPR,DPR);S=[];
          L.forEach(l=>{for(let i=0;i<l.n;i++)S.push({x:Math.random()*innerWidth,y:Math.random()*innerHeight,l,phi:Math.random()*360})})};
        const draw=t=>{
          ctx.clearRect(0,0,W,H);
          if(t-last>600+Math.random()*600){last=t;const n=1+Math.floor(Math.random()*3);
            for(let k=0;k<n;k++){const v=4+Math.random()*4;
              S.push({m:1,x:-200-Math.random()*150,y:Math.random()*innerHeight*.7,vx:v,vy:v*.15,len:120+Math.random()*80})}}
          S.forEach((s,i)=>{
            if(s.m){
              ctx.strokeStyle='rgba(255,255,255,.85)';ctx.lineWidth=2;
              ctx.beginPath();ctx.moveTo(s.x,s.y);ctx.lineTo(s.x-s.len,s.y-s.len*.2);ctx.stroke();
              s.x+=s.vx;s.y+=s.vy;s.len*=.985;if(s.x>innerWidth+200)S.splice(i,1);return;}
            const px=s.x+tx*s.l.s*30,py=s.y+ty*s.l.s*30,
                  a=.6+.4*Math.sin(t/1000+s.phi),
                  h=200+55*Math.sin(t/1500+s.phi);
            ctx.fillStyle=`hsla(${h},100%,88%,${a})`;
            ctx.fillRect(px,py,s.l.z,s.l.z);
            s.y+=s.l.s*16;if(s.y>innerHeight)s.y=0;});
          requestAnimationFrame(draw);};
        addEventListener('pointermove',e=>{tx=e.clientX/innerWidth-.5;ty=e.clientY/innerHeight-.5},{passive:true});
        addEventListener('deviceorientation',e=>{if(e.beta!=null){tx=e.gamma/20;ty=e.beta/40}},{passive:true});
        R();requestAnimationFrame(draw);addEventListener('resize',R);
      });
    </script>
  </body>
</html>
